<html lang="ja">
<head>
  <script type="text/javascript">
    function text2pukiwikiTask() {
      var input = document.getElementById('inputArea').value.replace(/\r\n|\r/g, "\n");
      var lines = input.split( '\n' );
      var outputstr = "* やったこと\n（※ ■: やった,  □: やれなかった）\n\n";

      for ( var i = 0; i < lines.length; i++ ) {
        if ( lines[i] != '' ) {
          lines[i] += "~\n";
          if (lines[i].match(/^(□|■| |　).*/)) {
            lines[i] = "　" + lines[i];
          }
        } else {
          lines[i] += "\n";
        }
        outputstr += lines[i];
      }
      output(outputstr);
    }

    function text2pukiwiki() {
      var input = document.getElementById('inputArea').value.replace(/\r\n|\r/g, "\n");
      var lines = input.split( '\n' );
      var outputstr = "";

      for ( var i = 0; i < lines.length; i++ ) {
        if ( lines[i] != '' ) {
          lines[i] += "~\n";
          if (lines[i].match(/^ .*/)) {
            lines[i] = " " + lines[i];
          } else if(lines[i].match(/^　.*/)) {
            lines[i] = "　" + lines[i];
          }
        } else {
          lines[i] += "\n";
        }
        outputstr += lines[i];
      }
      output(outputstr);
    }

    function output(s) {
      document.getElementById('outputArea').value = s;
    }
  </script>
  <style type="text/css"></style>
</head>
<body>

  <textarea id="inputArea" class="inputArea" rows="15" cols="100"></textarea> <br>
  <input type="button" name="btn2Text" value="text->pukiwikiTask" onclick="text2pukiwikiTask();">
  <input type="button" name="btn2Text" value="text->pukiwiki" onclick="text2pukiwiki();"> <br>
  <textarea id="outputArea" class="outputArea" rows="15" cols="100" readonly></textarea>

</body>
</html>
